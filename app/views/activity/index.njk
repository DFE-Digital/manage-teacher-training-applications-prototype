{% extends "_layout.njk" %}

{% set primaryNavId = 'activity' %}
{% set title = "Activity log" %}

{% block content %}


      <h1 class="govuk-heading-xl">{{title}}</h1>


      {% for event in events %}

        {% set name = [event.app["personal-details"]["given-name"], event.app["personal-details"]["family-name"]] | join(" ") %}
        {% set note = null %}

        {% if event.event.title == "Enrolled" %}
          {% set title = event.event.user + " enrolled " + name %}
        {% elseif event.event.title == "Conditions met" %}
          {% set title = event.event.user + " recruited " + name %}
        {% elseif event.event.title == "Moved to next cycle" %}
          {% set title = event.event.user + " deffered " + name + "’s offer to " + event.app.provider %}
        {% elseif event.event.title == "Application submitted" %}
          {% set title = name + " submitted an application to " + event.app.provider  %}
        {% elseif event.event.title == "Application rejected automatically" %}
          {% set title = name + "’s application was rejected automatically" %}
        {% elseif event.event.title == "Application rejected" %}
          {% set title = event.event.user + " rejected " + name + "’s application"%}
        {% elseif event.event.title == "Offer accepted" %}
          {% set title = name + " accepted an offer from " + event.app.provider %}
        {% elseif event.event.title == "Note added" %}
          {% set title = event.event.user + " add a note to " + name +"’s application" %}
          {% set note = event.app.notes.items[event.event.meta.noteIndex] %}
        {% elseif event.event.title == "Offer declined" %}
          {% set title = name + " declined an offer from " + event.app.provider %}
        {% elseif event.event.title == "Offer made" %}
          {% set title = event.event.user + " made an offer to " + name  %}
        {% elseif event.event.title == "Application withdrawn" %}
          {% set title = name + " withdrew their application to " + event.app.provider  %}
        {% elseif event.event.title == "Conditions not met" %}
          {% set title = event.event.user + " marked " + name + "’s conditions as not met"  %}
        {% elseif event.event.title == "Offer withdrawn" %}
          {% set title = event.event.user + " withdrew " + name + "’s offer to " + event.app.provider  %}
        {% else %}
          {% set title = event.event.title %}
        {% endif %}



        {{appLogCard({
          title: title,
          dateText: event.event.date | date,
          note: note if note,
          link: {
            href: "#",
            text: "View application"
          }
        })}}

      {% endfor %}

{#
      {{appLogCard({
        classes: "app-notification-card--first",
        title: "Harvey Noel granted you permission to see safeguarding information for courses run and ratified by Teaching Excellence SCITT",
        dateText: "Today at 17:12pm",
        link: {
          href: "#",
          text: "View account"
        }
      })}}

      {{appLogCard({
        title: "Mike Ross added a note to Eloise Well’s application",
        dateText: "Today at 3:32pm",
        course: {
          provider: 'Teaching Excellence SCITT',
          subject: 'Primary (5-11) (X100)',
          location: 'Lingfield - training location',
          accreditedbody: 'Excellence SCITT'
        },
        note: {
          subject: "Check qualifications",
          note: "Make sure you review this application paying close attention to their qualifications"
        },
        link: {
          href: "#",
          text: "View note"
        }
      })}}

      {{appLogCard({
        title: "Kelly Jane Spears submitted their application",
        dateText: "Today at 1:33pm",
        course: {
          provider: 'Teaching Excellence SCITT',
          subject: 'Primary (5-11) (X100)',
          location: 'Lingfield - training location',
          accreditedbody: 'Excellence SCITT'
        },
        link: {
          href: "#",
          text: "View application"
        }
      })}}

      {{appLogCard({
        title: "Eloise Well’s accepted your offer",
        dateText: "Yesterday at 9:57pm",
        course: {
          provider: 'Teaching Excellence SCITT',
          subject: 'Primary (5-11) (X100)',
          location: 'Lingfield - training location',
          accreditedbody: 'Excellence SCITT'
        },
        link: {
          href: "#",
          text: "View application"
        }
      })}}

      {{appLogCard({
        title: "Esther Fairley withdrew their application",
        dateText: "19 May 2020 at 9:55am",
        course: {
          provider: 'Teaching Excellence SCITT',
          subject: 'Primary (5-11) (X100)',
          location: 'Lingfield - training location',
          accreditedbody: 'Excellence SCITT'
        },
        link: {
          href: "#",
          text: "View offer"
        }
      })}}

      {{appLogCard({
        title: "Elizabeth Rose declined your offer",
        dateText: "17 May 2020 at 8:18am",
        course: {
          provider: 'Teaching Excellence SCITT',
          subject: 'Primary (5-11) (X100)',
          location: 'Lingfield - training location',
          accreditedbody: 'Excellence SCITT'
        },
        link: {
          href: "#",
          text: "View offer"
        }
      })}}

       {{appLogCard({

        title: "Daniel James Jennings’ application was rejected by default",
        dateText: "14 May 2020 at 7:19pm",
        course: {
          provider: 'Teaching Excellence SCITT',
          subject: 'Primary (5-11) (X100)',
          location: 'Lingfield - training location',
          accreditedbody: 'Excellence SCITT'
        },
        link: {
          href: "#",
          text: "View application"
        }
      })}}

      {{appLogCard({
        title: "Elizabeth Rose declined your offer",
        dateText: "17 May 2020 at 8:18am",
        course: {
          provider: 'Teaching Excellence SCITT',
          subject: 'Primary (5-11) (X100)',
          location: 'Lingfield - training location',
          accreditedbody: 'Excellence SCITT'
        },
        link: {
          href: "#",
          text: "View offer"
        }
      })}}

       {{appLogCard({
        title: "Daniel James Jennings’ application was rejected by default",
        dateText: "14 May 2020 at 7:19pm",
        course: {
          provider: 'Teaching Excellence SCITT',
          subject: 'Primary (5-11) (X100)',
          location: 'Lingfield - training location',
          accreditedbody: 'Excellence SCITT'
        },
        link: {
          href: "#",
          text: "View application"
        }
      })}} #}


      {{ mojPagination({
          results: {
            from: 1,
            to: 15,
            count: 30
          },
            next: {
            text: 'Next',
            href: ''
          },
            items: [{
            text: '1',
            href: '/page=1',
            selected: true
          }, {
            text: '2',
            href: '/page=2'
          }]
        }) }}



{% endblock %}
