{% extends "_layout.njk" %}

{% set primaryNavId = 'applications' %}
{% set subNavId = "application" %}
{% set name = application.personalDetails.name %}
{% set pageName = 'Application' %}
{% set title = pageName + ' - ' + application.personalDetails.name %}

{% set mainClasses = 'govuk-!-padding-top-1' %}

{% block afterHeader %}
  {% include "_includes/applications/identity-bar.njk" %}
{% endblock %}

{% block content %}
  {# {% set flash = 'boom' %} #}

  {{ govukNotificationBanner({
    classes: 'govuk-!-margin-top-4 govuk-!-margin-bottom-4',
    html: "<h2 class=\"govuk-heading-m\">"+flash+"</h2>",
    type: "success",
    icon: false
  }) if flash | falsify }}

  {% include "_includes/applications/sub-nav.njk" %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h2 class="govuk-heading-l govuk-!-font-size-36">Application</h2>


      {# {% include "_includes/applications/h1.njk" %} #}



      {% if not query.transferred %}
        <p class="govuk-body">
          {# {% if application.status not in ["Rejected","Declined","Offer withdrawn","Application withdrawn","Conditions not met"] %}
            <a class="govuk-link govuk-!-margin-right-2" href="/applications/{{application.id}}/withdraw">Withdraw application</a>
          {% endif %} #}
          <a class="govuk-link" href="#" download>Download application (PDF)</a>
        </p>
      {% endif %}
    </div>
  </div>

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      {% include "_includes/applications/application-details.njk" %}
    </div>
  </div>

  {% if not query.transferred %}
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">
        {% include "_includes/applications/personal-details.njk" %}
      </div>
    </div>

    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">
        {% include "_includes/applications/contact-details.njk" %}
      </div>
    </div>
  {% endif %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      {% include "_includes/applications/course-details.njk" %}
    </div>
  </div>

  {% if not query.transferred %}
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">
        {% include "_includes/applications/criminal-record-and-professional-misconduct.njk" %}
      </div>
    </div>
  {% endif %}

  {% if not query.transferred %}
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">
        {% include "_includes/applications/experience.njk" %}
      </div>
    </div>
  {% endif %}

  {% if not query.transferred %}
    <h2 class="govuk-heading-m govuk-!-margin-top-2 govuk-!-font-size-27">Qualifications</h2>
  {% endif %}

  {% if not query.transferred %}
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-full">
        {% include "_includes/applications/degrees.njk" %}
      </div>
    </div>
  {% endif %}

  {% if not query.transferred %}
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-full">
        {% include "_includes/applications/gcses.njk" %}
      </div>
    </div>
  {% endif %}

  {% if not query.transferred %}
    {% if application.personalDetails.isInternationalCandidate %}
      <div class="govuk-grid-row">
        <div class="govuk-grid-column-full">
          {% include "_includes/applications/english-language-qualification.njk" %}
        </div>
      </div>
    {% endif %}
  {% endif %}

  {% if not query.transferred %}
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-full">
        {% include "_includes/applications/other-qualifications.njk" %}
      </div>
    </div>
  {% endif %}

  {% if not query.transferred %}
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">
        {% include "_includes/applications/personal-statement.njk" %}
      </div>
    </div>
  {% endif %}

  {% if not query.transferred %}
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">
        {% include "_includes/applications/references.njk" %}
      </div>
    </div>
  {% endif %}

  {% if not query.transferred %}
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">
        {% include "_includes/applications/disability-support.njk" %}
      </div>
    </div>
  {% endif %}

  {% if not query.transferred %}
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">
        {% include "_includes/applications/diversity-information.njk" %}
      {% endif %}
    </div>
  </div>
{% endblock %}

{% block pageScripts %}
  <script src="/public/javascripts/components/button-menu/button-menu.js"></script>

  {% if application.status == 'Received' %}
    <script>
      new AppFrontend.ButtonMenu({
        container: $(".app-button-menu").eq(2),
        mq: "(min-width: 1000em)",
        buttonText: "More actions",
        buttonClasses:
          "govuk-button--secondary app-button-menu__toggle-button--secondary",
        menuClasses: "app-button-menu__wrapper--right",
      });
    </script>
  {% endif%}

  {% if application.status == 'Shortlisted' %}
    <script>
      new AppFrontend.ButtonMenu({
        container: $(".app-button-menu").eq(1),
        mq: "(min-width: 1000em)",
        buttonText: "More actions",
        buttonClasses:
          "govuk-button--secondary app-button-menu__toggle-button--secondary",
        menuClasses: "app-button-menu__wrapper--right",
      });
    </script>
  {% endif%}

  {% if application.status == 'Interviewing' %}
    <script>
      new AppFrontend.ButtonMenu({
        container: $(".app-button-menu").eq(1),
        mq: "(min-width: 1000em)",
        buttonText: "More actions",
        buttonClasses:
          "govuk-button--secondary app-button-menu__toggle-button--secondary",
        menuClasses: "app-button-menu__wrapper--right",
      });
    </script>
  {% endif%}

  {% if application.status == 'Offered' %}
    <script>
      new AppFrontend.ButtonMenu({
        container: $(".app-button-menu").eq(0),
        mq: "(min-width: 1000em)",
        buttonText: "More actions",
        buttonClasses:
          "govuk-button--secondary app-button-menu__toggle-button--secondary",
        menuClasses: "app-button-menu__wrapper--right",
      });
    </script>
  {% endif%}




{% endblock %}
