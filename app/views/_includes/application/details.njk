{% set nationalityText %}
  {% set nationalities = application["personal-details"].nationality %}
  {%- for nationality in nationalities -%}
    {{ (" and " if loop.last else ", ") if not loop.first }}{{ nationality }}
  {%- endfor -%}
{% endset %}

{{ govukSummaryList({
  rows: [{
    key: {
      text: "Submitted"
    },
    value: {
      text: application.submittedDate | date("d LLLL yyyy") + " at " + note.date | time
    }
  }, {
    key: {
      text: "Cycle"
    },
    value: {
      text: application.cycle
    },
    actions: {
      items: [
        {
          href: '/application/' + application.id + '/cycle/edit',
          text: "Change",
          visuallyHiddenText: "cycle"
        }
      ]
    }
  }, {
    key: {
      text: "Full name"
    },
    value: {
      text: name
    }
  }, {
    key: {
      text: "Reference"
    },
    value: {
      text: application.id
    }
  }, {
    key: {
      text: "Nationality"
    },
    value: {
      text: nationalityText
    }
  }, {
    key: {
      text: "Residency status"
    },
    value: {
      text: application["personal-details"]["residency-status"]
    }
  } if application["personal-details"]["residency-status"], {
    key: {
      text: "Phone number"
    },
    value: {
      html: "<a href=\"tel:" + application["contact-details"].tel | replace(" ", "") + "\">" + application["contact-details"].tel + "</a>"
    }
  }, {
    key: {
      text: "Email address"
    },
    value: {
      html: "<a href=\"mailto:" + application["contact-details"].email + "\">" + application["contact-details"].email + "</a>"
    }
  }, {
    key: {
      text: "Address"
    },
    value: {
      html: application["contact-details"].address | toArray | join("<br>") if application["contact-details"].address else "No information shared"
    }
  }]
}) }}
