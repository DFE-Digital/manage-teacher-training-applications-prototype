{% from "govuk/components/inset-text/macro.njk"       import govukInsetText %}
{% set previewHtml %}

  {% if rejectionReasons['actions'] == "Yes" %}
    <div class="app-feedback">
    <h2 class="govuk-heading-s">
      Something you did
    </h2>

    <ul class="govuk-list app-list--spaced">

      {% set checkboxValue = "Did not reply to messages" %}
      {% if checked(rejectionReasons["actions-reasons"], checkboxValue) %}
        <li>{{checkboxValue}}.</li>
      {% endif %}

      {% set checkboxValue = "Did not attend interview" %}
      {% if checked(rejectionReasons["actions-reasons"], checkboxValue) %}
        <li>{{checkboxValue}}.</li>
      {% endif %}

      {% set checkboxValue = "Did not respond" %}
      {% if checked(rejectionReasons["actions-reasons"], checkboxValue) %}
        <li>{{checkboxValue}}.</li>
      {% endif %}

      {% set checkboxValue = "Other" %}
      {% if checked(rejectionReasons["actions-reasons"], "Other") %}
        <li>
          {{rejectionReasons['actions-reasons-other']}}
          <p>{{rejectionReasons['actions-reasons-other-improve']}}</p>
        </li>
      {% endif %}
    </ul>

    {% if rejectionChangeLinks %}
      <p class="app-rejection-change-link"><a class="govuk-link govuk-link--no-visited-state" href="/applications/{{application.id}}/reject">Change</a></p>
    {% endif %}
    </div>
  {% endif %}



  {% if rejectionReasons['application-quality'] == "Yes" %}
    <div class="app-feedback">
    <h2 class="govuk-heading-s">
      Quality of application
    </h2>

    <ul class="govuk-list app-list--spaced">

      {% set fieldName = "application-quality-reasons" %}
      {% set checkboxValue = "Personal statement" %}
      {% set textBoxName = "application-quality-reasons-personal-statement" %}
      {% if checked(rejectionReasons[fieldName], checkboxValue) %}
        <li>
          Personal statement could be improved.
          <p>{{rejectionReasons[textBoxName]}}</p>
        </li>
      {% endif %}

      {% set checkboxValue = "Subject knowledge" %}
      {% set textBoxName = "application-quality-reasons-subject-knowledge" %}
      {% if checked(rejectionReasons[fieldName], checkboxValue) %}
        <li>
          Subject knowledge could be improved.
          <p>{{rejectionReasons[textBoxName]}}</p>
        </li>
      {% endif %}

      {% set checkboxValue = "Other" %}
      {% if checked(rejectionReasons[fieldName], checkboxValue) %}
        <li>
          {{rejectionReasons["application-quality-reasons-other"]}}
          <p>{{rejectionReasons["application-quality-reasons-other-improve"]}}</p>
        </li>
      {% endif %}
    </ul>

    {% if rejectionChangeLinks %}
      <p class="app-rejection-change-link"><a class="govuk-link govuk-link--no-visited-state" href="/applications/{{application.id}}/reject">Change</a></p>
    {% endif %}
    </div>
  {% endif %}



  {% if rejectionReasons['missing-qualifications'] == "Yes" %}
    <div class="app-feedback">
    <h2 class="govuk-heading-s">
      Qualifications
    </h2>

    <ul class="govuk-list app-list--spaced">

      {% set checkboxValue = "No maths GCSE grade 4 (C) or above, or accepted equivalent" %}
      {% if checked(rejectionReasons["missing-qualifications-reasons"], checkboxValue) %}
        <li>{{checkboxValue}}.</li>
      {% endif %}

      {% set checkboxValue = "No English GCSE grade 4 (C) or above, or accepted equivalent" %}
      {% if checked(rejectionReasons["missing-qualifications-reasons"], checkboxValue) %}
        <li>{{checkboxValue}}.</li>
      {% endif %}

      {% set checkboxValue = "No science GCSE grade 4 (C) or above, or accepted equivalent (for primary applicants)" %}
      {% if checked(rejectionReasons["missing-qualifications-reasons"], checkboxValue) %}
        <li>{{checkboxValue}}.</li>
      {% endif %}

      {% set checkboxValue = "No degree" %}
      {% if checked(rejectionReasons["missing-qualifications-reasons"], checkboxValue) %}
        <li>{{checkboxValue}}.</li>
      {% endif %}

      {% set checkboxValue = "Degree does not meet course requirements" %}
      {% if checked(rejectionReasons["missing-qualifications-reasons"], checkboxValue) %}
        <li>{{checkboxValue}}.</li>
      {% endif %}

      {% set checkboxValue = "Other" %}
      {% if checked(rejectionReasons["missing-qualifications-reasons"], "Other") %}
        <li>{{rejectionReasons['missing-qualifications-reasons-other']}}</p>
      {% endif %}

    </ul>

    {% if rejectionChangeLinks %}
      <p class="app-rejection-change-link"><a class="govuk-link govuk-link--no-visited-state" href="/applications/{{application.id}}/reject">Change</a></p>
    {% endif %}
    </div>
  {% endif %}



  {% if rejectionReasons['interview-performance'] == "Yes" %}
    <div class="app-feedback">
    <h2 class="govuk-heading-s">
      Performance at interview
    </h2>

    <p>{{rejectionReasons['interview-performance-advice']}}</p>

    {% if rejectionChangeLinks %}
      <p class="app-rejection-change-link"><a class="govuk-link govuk-link--no-visited-state" href="/applications/{{application.id}}/reject">Change</a></p>
    {% endif %}
    </div>
  {% endif %}

  {% if rejectionReasons['course-full'] == "Yes" %}
    <div class="app-feedback">
    <h2 class="govuk-heading-s">
      Course full
    </h2>
    <p>The course you applied to was full.</p>

    {% if rejectionChangeLinks %}
      <p class="app-rejection-change-link"><a class="govuk-link govuk-link--no-visited-state" href="/applications/{{application.id}}/reject">Change</a></p>
    {% endif %}
    </div>
  {% endif %}


  {% if rejectionReasons['other-offer'] == "Yes" %}
    <div class="app-feedback">
    <h2 class="govuk-heading-s">
      {{application["provider"]}} offered you a place on another course
    </h2>
    <p>{{rejectionReasons["other-offer-details"]}}</p>

    {% if rejectionChangeLinks %}
      <p class="app-rejection-change-link"><a class="govuk-link govuk-link--no-visited-state" href="/applications/{{application.id}}/reject">Change</a></p>
    {% endif %}
    </div>
  {% endif %}


{% if rejectionReasons['honesty'] == "Yes" %}
  <div class="app-feedback">
    <h2 class="govuk-heading-s">
      Honesty and professionalism
    </h2>

    <ul class="govuk-list app-list--spaced  ">

      {% set fieldName = "honesty-reasons" %}
      {% set checkboxValue = "Inaccurate or false information in the application" %}
      {% set textBoxName = "honesty-reasons-false-information" %}
      {% if checked(rejectionReasons[fieldName], checkboxValue) %}
        <li>
          {{checkboxValue}}.
          <p>{{rejectionReasons[textBoxName]}}</p>
        </li>
      {% endif %}

      {% set checkboxValue = "Evidence of plagiarism in the application" %}
      {% set textBoxName = "honesty-reasons-plagiarism" %}
      {% if checked(rejectionReasons[fieldName], checkboxValue) %}
        <li>
          {{checkboxValue}}.
          <p>{{rejectionReasons["honesty-reasons-plagiarism"]}}</p>
        </li>
      {% endif %}

      {% set checkboxValue = "References did not support the application" %}
      {% set textBoxName = "honesty-reasons-references" %}
      {% if checked(rejectionReasons[fieldName], checkboxValue) %}
        <li>
          {{checkboxValue}}.
          <p>{{rejectionReasons["honesty-reasons-reference-information"]}}</p>
        </li>
      {% endif %}


      {% set checkboxValue = "Other" %}
      {% set textBoxName = "honesty-reasons-other" %}
      {% if checked(rejectionReasons[fieldName], checkboxValue) %}
        <li>{{rejectionReasons["honesty-reasons-other"]}}</li>
      {% endif %}

    </ul>
    {% if rejectionChangeLinks %}
      <p class="app-rejection-change-link"><a class="govuk-link govuk-link--no-visited-state" href="/applications/{{application.id}}/reject">Change</a></p>
    {% endif %}
    </div>
  {% endif %}


  {% if rejectionReasons['safeguarding'] == "Yes" %}
    <div class="app-feedback">
    <h2 class="govuk-heading-s">
      Safeguarding issues
    </h2>

    <ul class="govuk-list app-list--spaced  ">

      {% set fieldName = "safeguarding-reasons" %}

      {% set checkboxValue = "The candidate disclosed information which makes them unsuitable to work with children" %}
      {% set textBoxName = "safeguarding-reasons-disclosed-information" %}
      {% if checked(rejectionReasons[fieldName], checkboxValue) %}
        <li>
          {{checkboxValue}}.
          <p>{{rejectionReasons["safeguarding-reasons-disclosed-information"]}}</p>
        </li>
      {% endif %}

      {% set checkboxValue = "The vetting process found information which makes the candidate unsuitable to work with children" %}
      {% set textBoxName = "safeguarding-reasons-vetting-information" %}
      {% if checked(rejectionReasons[fieldName], checkboxValue) %}
        <li>
          {{checkboxValue}}.
          <p>{{rejectionReasons["safeguarding-reasons-vetting-information"]}}</p>
        </li>
      {% endif %}

      {% set checkboxValue = "Other" %}
      {% set textBoxName = "safeguarding-reasons-other" %}
      {% if checked(rejectionReasons[fieldName], checkboxValue) %}
        <li>{{rejectionReasons["safeguarding-reasons-other"]}}</li>
      {% endif %}

    </ul>
    {% if rejectionChangeLinks %}
      <p class="app-rejection-change-link"><a class="govuk-link govuk-link--no-visited-state" href="/applications/{{application.id}}/reject">Change</a></p>
    {% endif %}
    </div>
  {% endif %}

  {% if rejectionReasons['asked'] == "Yes" %}
    <div class="app-feedback">
    <h2 class="govuk-heading-s">
      You asked to close your application
    </h2>
    <p>{{rejectionReasons["asked-reasons"]}}</p>

    {% if rejectionChangeLinks %}
      <p class="app-rejection-change-link"><a class="govuk-link govuk-link--no-visited-state" href="/applications/{{application.id}}/reject">Change</a></p>
    {% endif %}
    </div>
  {% endif %}



  {% if rejectionReasons['why'] %}
    <div class="app-feedback">
    <h2 class="govuk-heading-s">
      Why your application was unsuccessful
    </h2>
    <p>{{rejectionReasons['why']}}</p>
    {% if rejectionChangeLinks %}
      <p class="app-rejection-change-link"><a class="govuk-link govuk-link--no-visited-state" href="/applications/{{application.id}}/reject/other-reasons-for-rejection/">Change</a></p>
    {% endif %}
    </div>
  {% endif %}

  {% if rejectionReasons['other-feedback'] == "Yes" %}
    <div class="app-feedback">
    <h2 class="govuk-heading-s">
      Additional feedback
    </h2>
    <p>{{rejectionReasons['other-feedback-details']}}</p>
    {% if rejectionChangeLinks %}
      <p class="app-rejection-change-link"><a class="govuk-link govuk-link--no-visited-state" href="/applications/{{application.id}}/reject/other-reasons-for-rejection/">Change</a></p>
    {% endif %}
    </div>
  {% endif %}

  {% if rejectionReasons["other-offer"] != "Yes" %}
    <div class="app-feedback">
      <h2 class="govuk-heading-s">
        Future applications
      </h2>

      {% if rejectionReasons['future-applications'] == "Yes" %}
        <p>{{application["provider"]}} would be interested in future applications from you.</p>
      {% else %}
        <p>{{application["provider"]}} would not be interested in future applications from you.</p>
      {% endif %}

      {% if rejectionChangeLinks %}
        <p class="app-rejection-change-link"><a class="govuk-link govuk-link--no-visited-state" href="/applications/{{application.id}}/reject/other-reasons-for-rejection/">Change</a></p>
      {% endif %}
    </div>
  {% endif %}


{% endset %}

{{ govukInsetText({
  html: previewHtml,
  classes: "app-inset-text"
}) }}
