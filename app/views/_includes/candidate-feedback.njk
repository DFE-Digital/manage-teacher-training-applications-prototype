{% from "govuk/components/inset-text/macro.njk"       import govukInsetText %}

{% if not baseUrl %}
  {% set baseUrl = "/applications/" + application.id + "/reject" %}
{% endif %}

{% set previewHtml %}

  <div class="app-feedback">

    {% set checkboxValue = 'Qualifications' %}
    {% if checked(rejectionReasons.categories, checkboxValue) %}
      <div class="app-feedback__section">
        <h2 class="govuk-heading-s">
          {{checkboxValue}}
        </h2>

        <ul class="govuk-list app-list--spaced">

          {% set category = 'qualifications' %}
          {% set groupName = category + '-reasons' %}

          {% set checkboxValue = "No maths GCSE grade 4 (C) or above, or accepted equivalent" %}
          {% if checked(rejectionReasons[groupName], checkboxValue) %}
            <li>{{checkboxValue}}.</li>
          {% endif %}

          {% set checkboxValue = "No English GCSE grade 4 (C) or above, or accepted equivalent" %}
          {% if checked(rejectionReasons[groupName], checkboxValue) %}
            <li>{{checkboxValue}}.</li>
          {% endif %}

          {% set checkboxValue = "No science GCSE grade 4 (C) or above, or accepted equivalent (for primary applicants)" %}
          {% if checked(rejectionReasons[groupName], checkboxValue) %}
            <li>{{checkboxValue}}.</li>
          {% endif %}

          {% set checkboxValue = "No degree" %}
          {% if checked(rejectionReasons[groupName], checkboxValue) %}
            <li>{{checkboxValue}}.</li>
          {% endif %}

          {% set checkboxValue = "Degree does not meet course requirements" %}
          {% if checked(rejectionReasons[groupName], checkboxValue) %}
            <li>{{checkboxValue}}.</li>
          {% endif %}

          {% set checkboxValue = "Other" %}
          {% if checked(rejectionReasons[groupName], checkboxValue) %}
            <li>
              Other:
              <p>{{rejectionReasons[groupName + '-other']}}</p>
            </li>
          {% endif %}

        </ul>

        {% if rejectionChangeLinks %}
          <p class="app-rejection-change-link"><a class="govuk-link govuk-link--no-visited-state" href="{{baseUrl}}">Change</a></p>
        {% endif %}
      </div>
    {% endif %}





    {% set checkboxValue = 'Personal statement' %}
    {% if checked(rejectionReasons.categories, checkboxValue) %}
      <div class="app-feedback__section">
        <h2 class="govuk-heading-s">
          {{checkboxValue}}
        </h2>

        <ul class="govuk-list app-list--spaced">

          {% set category = 'personal-statement' %}
          {% set groupName = category + '-reasons' %}

          {% set checkboxValue = "Quality of writing" %}
          {% if checked(rejectionReasons[groupName], checkboxValue) %}
            <li>
              {{checkboxValue}}:
              <p>{{rejectionReasons[groupName + '-quality-of-writing']}}</p>
            </li>
          {% endif %}

          {% set checkboxValue = "Evidence of plagiarism" %}
          {% if checked(rejectionReasons[groupName], checkboxValue) %}
            <li>
              {{checkboxValue}}:
              <p>{{rejectionReasons[groupName + '-plagiarism']}}</p>
            </li>
          {% endif %}

          {% set checkboxValue = "Other" %}
          {% if checked(rejectionReasons[groupName], checkboxValue) %}
            <li>
              Other:
              <p>{{rejectionReasons[groupName + '-other']}}</p>
            </li>
          {% endif %}

        </ul>

        {% if rejectionChangeLinks %}
          <p class="app-rejection-change-link"><a class="govuk-link govuk-link--no-visited-state" href="{{baseUrl}}">Change</a></p>
        {% endif %}
      </div>
    {% endif %}





    {% set checkboxValue = 'Teaching knowledge and ability' %}
    {% if checked(rejectionReasons.categories, checkboxValue) %}
      <div class="app-feedback__section">
        <h2 class="govuk-heading-s">
          {{checkboxValue}}
        </h2>

        <ul class="govuk-list app-list--spaced">

          {% set category = 'teaching-knowledge' %}
          {% set groupName = category + '-reasons' %}

          {% set checkboxValue = "Understanding of subject" %}
          {% if checked(rejectionReasons[groupName], checkboxValue) %}
            <li>
              {{checkboxValue}}:
              <p>{{rejectionReasons[groupName + '-subject']}}</p>
            </li>
          {% endif %}

          {% set checkboxValue = "Understanding of safeguarding" %}
          {% if checked(rejectionReasons[groupName], checkboxValue) %}
            <li>
              {{checkboxValue}}:
              <p>{{rejectionReasons[groupName + '-safeguarding']}}</p>
            </li>
          {% endif %}

          {% set checkboxValue = "Understanding of teaching methods" %}
          {% if checked(rejectionReasons[groupName], checkboxValue) %}
            <li>
              {{checkboxValue}}:
              <p>{{rejectionReasons[groupName + '-teaching-method']}}</p>
            </li>
          {% endif %}

          {% set checkboxValue = "Other" %}
          {% if checked(rejectionReasons[groupName], checkboxValue) %}
            <li>
              Other:
              <p>{{rejectionReasons[groupName + '-other']}}</p>
            </li>
          {% endif %}

        </ul>

        {% if rejectionChangeLinks %}
          <p class="app-rejection-change-link"><a class="govuk-link govuk-link--no-visited-state" href="{{baseUrl}}">Change</a></p>
        {% endif %}
      </div>
    {% endif %}

    {% set checkboxValue = 'Communication issue' %}
    {% if checked(rejectionReasons.categories, checkboxValue) %}
      <div class="app-feedback__section">
        <h2 class="govuk-heading-s">
          {{checkboxValue}}
        </h2>

        <ul class="govuk-list app-list--spaced">

          {% set category = 'communication' %}
          {% set groupName = category + '-reasons' %}

          {% set checkboxValue = "Did not reply to messages" %}
          {% if checked(rejectionReasons[groupName], checkboxValue) %}
            <li>
              {{checkboxValue}}:
              <p>{{rejectionReasons[groupName + '-did-not-reply-to-messages']}}</p>
            </li>
          {% endif %}

          {% set checkboxValue = "Did not attend interview" %}
          {% if checked(rejectionReasons[groupName], checkboxValue) %}
            <li>
              {{checkboxValue}}:
              <p>{{rejectionReasons[groupName + '-did-not-attend-interview']}}</p>
            </li>
          {% endif %}

          {% set checkboxValue = "Other" %}
          {% if checked(rejectionReasons[groupName], checkboxValue) %}
            <li>
              Other:
              <p>{{rejectionReasons[groupName + '-other']}}</p>
            </li>
          {% endif %}

        </ul>

        {% if rejectionChangeLinks %}
          <p class="app-rejection-change-link"><a class="govuk-link govuk-link--no-visited-state" href="{{baseUrl}}">Change</a></p>
        {% endif %}
      </div>
    {% endif %}











    {% if rejectionReasons['actions'] == "Yes" %}
      <div class="app-feedback__section">
      <h2 class="govuk-heading-s">
        Something you did
      </h2>

      <ul class="govuk-list app-list--spaced">

        {% set checkboxValue = "Did not reply to messages" %}
        {% if checked(rejectionReasons["actions-reasons"], checkboxValue) %}
          <li>{{checkboxValue}}.</li>
        {% endif %}

        {% set checkboxValue = "Did not attend interview" %}
        {% if checked(rejectionReasons["actions-reasons"], checkboxValue) %}
          <li>{{checkboxValue}}.</li>
        {% endif %}

        {% set checkboxValue = "Did not respond" %}
        {% if checked(rejectionReasons["actions-reasons"], checkboxValue) %}
          <li>{{checkboxValue}}.</li>
        {% endif %}

        {% set checkboxValue = "Other" %}
        {% if checked(rejectionReasons["actions-reasons"], "Other") %}
          <li>
            {{rejectionReasons['actions-reasons-other']}}
            <p>{{rejectionReasons['actions-reasons-other-improve']}}</p>
          </li>
        {% endif %}
      </ul>

      {% if rejectionChangeLinks %}
        <p class="app-rejection-change-link"><a class="govuk-link govuk-link--no-visited-state" href="{{baseUrl}}">Change</a></p>
      {% endif %}
      </div>
    {% endif %}

    {% if rejectionReasons['course-full'] == "Yes" %}
      <div class="app-feedback__section">
      <h2 class="govuk-heading-s">
        Course full
      </h2>
      <p>The course you applied to was full.</p>

      {% if rejectionChangeLinks %}
        <p class="app-rejection-change-link"><a class="govuk-link govuk-link--no-visited-state" href="{{baseUrl}}">Change</a></p>
      {% endif %}
      </div>
    {% endif %}

    {% if rejectionReasons['sponsor-visa'] == "Yes" %}
      <div class="app-feedback__section">
      <h2 class="govuk-heading-s">
        Visa application sponsorship
      </h2>

      <p>{{ rejectionReasons["sponsor-visa-details"] }}</p>

      {% if rejectionChangeLinks %}
        <p class="app-rejection-change-link"><a class="govuk-link govuk-link--no-visited-state" href="{{baseUrl}}">Change</a></p>
      {% endif %}
      </div>
    {% endif %}
  </div>
{% endset %}

{{ govukInsetText({
  html: previewHtml,
  classes: "app-inset-text"
}) }}
