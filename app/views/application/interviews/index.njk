{% extends "_layout.njk" %}

{% set primaryNavId = 'applications' %}
{% set subNavId = "interviews" %}
{% set name = [application.personalDetails.givenName, application.personalDetails.familyName] | join(" ") %}
{% set title = name %}

{% block content %}
  {{ appBanner({
    html: "<h2 class=\"govuk-heading-m\">"+flash+"</h2>",
    type: "success",
    icon: false
  }) if flash }}

  <h1 class="govuk-heading-xl govuk-!-margin-bottom-6">{{name}}
  {{ govukTag({ classes: statusText | statusClass, text: statusText }) }}</h1>

  {% include "_includes/application/respond-prompt.njk" %}
  {% include "_includes/application/defer-prompt.njk" %}

  {% include "_includes/application/sub-nav.njk" %}
  <div class="govuk-grid-ro">
    <div class="govuk-grid-column-two-third">

      {% if application.interviews.items.length > 0 %}

        {{ govukButton({
          text: "Set up an interview",
          href: "/application/" + application.id + "/interviews/new",
          classes: "govuk-button--secondary"
        }) }}

        <table class="govuk-table">
    <thead class="govuk-table__head">
      <tr class="govuk-table__row">
        <th scope="col" class="govuk-table__header govuk-!-width-one-third">Date and time</th>
        <th scope="col" class="govuk-table__header govuk-!-width-one-half">Details</th>
        <th scope="col" class="govuk-table__header">Actions</th>
      </tr>
    </thead>
    <tbody class="govuk-table__body">
      {% for interview in application.interviews.items %}
        <tr class="govuk-table__row">
          <td class="govuk-table__cell">{{interview.date | govukDateAtTime }}</td>
          <td class="govuk-table__cell">{{interview.details }}</td>
          <td class="govuk-table__cell"><a class="govuk-link govuk-link--no-visited-state" href="/application/{{application.id}}/interviews/{{interview.id}}/edit">Change</a> or <a class="govuk-link govuk-link--no-visited-state" href="/application/{{application.id}}/interviews/{{interview.id}}/delete">cancel</a></td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

      {% else %}
        <p>No interviews have been set up yet.</p>

        {{ govukButton({
          text: "Set up an interview",
          href: "/application/" + application.id + "/interviews/new",
          classes: "govuk-button--secondary"
        }) }}
      {% endif %}

    </div>
  </div>
{% endblock %}
