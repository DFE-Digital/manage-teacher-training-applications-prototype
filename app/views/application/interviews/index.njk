{% extends "_layout.njk" %}

{% set primaryNavId = 'applications' %}
{% set subNavId = "interviews" %}
{% set status = application.status %}
{% set name = [application.personalDetails.givenName, application.personalDetails.familyName] | join(" ") %}
{% set title = name %}

{% block content %}
  {{ appBanner({
    html: "<h2 class=\"govuk-heading-m\">"+flash+"</h2>",
    type: "success",
    icon: false
  }) if flash }}

  <h1 class="govuk-heading-xl govuk-!-margin-bottom-6">{{name}} {{ govukTag({ classes: status | statusClass, text: status })}}</h1>

  {% include "_includes/application/respond-prompt.njk" %}
  {% include "_includes/application/defer-prompt.njk" %}

  {% include "_includes/application/sub-nav.njk" %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

      {% if application.interviews.items %}

        {{ govukButton({
          text: "Set up an interview",
          href: "/application/" + application.id + "/interviews/new"
        }) }}

        {% for interview in application.interviews.items %}
          <div class="app-notes__note">
            <h2 class="govuk-heading-m govuk-!-margin-bottom-1"><a class="govuk-link govuk-link--no-visited-state" href="/application/{{application.id}}/notes/{{note.id}}">{{interview.date | govukDate }} at {{interview.time}}</a></h2>
            <p class="govuk-!-margin-bottom-1">{{interview.details}}</p>
          </div>
        {% endfor %}
      {% else %}
        <p>No interviews have been set up yet.</p>

        {{ govukButton({
          text: "Set up an interview",
          href: "/application/" + application.id + "/interviews/new"
        }) }}
      {% endif %}

    </div>
  </div>
{% endblock %}
