{% extends "_layout.njk" %}

{% set primaryNavId = 'applications' %}
{% set application = applications[applicationId] %}
{% set name = [application["personal-details"]["given-name"], application["personal-details"]["family-name"]] | join(" ") %}
{% set parent = "Application for " + application.course %}
{% set title = "Respond to application" %}

{% block pageNavigation %}
  {{ govukBreadcrumbs({
    items: [{
      text: "Applications",
      href: "/"
    }, {
      text: name,
      href: "/application/" + application.id
    }, {
      text: title
    }]
  }) if not data.bare }}
{% endblock %}

{% block content %}
  {# {% set isPrimaryCourse = application.course.includes("Primary") %} #}
  <h1 class="govuk-heading-xl">Respond to application</h1>

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

      {{ govukSummaryList({
        rows: [
          {
            key: {
              text: "Candidate name"
            },
            value: {
              html: application['personal-details']['given-name'] + ' ' +  application['personal-details']['family-name']
            }
          },
          {
            key: {
              text: "Course"
            },
            value: {
              html: application.course
            }
          },
          {
            key: {
              text: "Provider"
            },
            value: {
              html: application.provider
            }
          }
        ]
      }) }}
    </div>
  </div>


  <form action="{{ formaction | default('') }}" method="post">
    {{ govukRadios({
      fieldset: {
        legend: {
          html: "Choose response",
          classes: "govuk-fieldset__legend--m",
          isPageHeading: true
        }
      },
      idPrefix: "status",
      classes: "govuk-!-margin-top-2",
      name: "decision",
      items: [{
        value: "offer",
        text: "Make an offer for this course",
        hint: {
          text: "You'll be able to include any conditions or recommendations"
        },
        checked: checked("decision", "offer")
      }, {
        value: "different-course",
        text: "Make an offer for a different course",
        hint: {
          text: "You'll be able to include any conditions or recommendations"
        },
        checked: checked("decision", "different-offer")
      }, {
        value: "reject",
        text: "Reject this application",
        checked: checked("decision", "reject")
      }]
    }) }}

    {{ govukButton({
      text: "Continue"
    }) }}
  </form>
  <p class="govuk-body"><a href="/application/{{ application.id }}">Cancel</a></p>
{% endblock %}
