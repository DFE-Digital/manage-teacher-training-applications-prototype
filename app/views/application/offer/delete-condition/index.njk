{% extends "_layout.njk" %}

{% set primaryNavId = 'applications' %}
{% set name = application.personalDetails.name %}
{% set title = "Are you sure you want to delete this condition?" %}

{% block pageNavigation %}
  {{ govukBackLink({
    href: '/application/' + application.id + '/offer'
  }) }}
{% endblock %}

{% block content %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <span class="govuk-caption-l">{{name}}</span>
      <h1 class="govuk-heading-l">{{title}}</h1>

      <div class="app-offer-panel govuk-!-margin-bottom-6">
        <p class="govuk-!-margin-bottom-0">Condition: {{condition.description}}</p>
      </div>

      {% set warningHtml %}
        We’ll email the candidate to let them know they no longer need to meet this condition.
      {% endset %}

      {% if not hasRemainingConditions %}

        {% set warningHtml %}
          You’re about to delete the last condition — we’ll email the candidate to let them know they no longer have conditions to meet and the application status will be changed to ‘Conditions met’.
        {% endset %}

      {% endif %}

      {% if allRemainingConditionsComplete %}

        {% set warningHtml %}
          All other conditions are met – we’ll email the candidate to let them know they have met all of their conditions and the application status will be changed to ‘Conditions met’.
        {% endset %}
      {% endif %}

      {{ govukWarningText({
          html: warningHtml,
          iconFallbackText: "Fallback text"
        }) }}

      <form method="post">
        {{ govukButton({
          text: "Yes – delete this condition"
        }) }}
      </form>
      <p class="govuk-body"><a href="/application/{{ application.id }}/offer">Cancel</a></p>
    </div>
  </div>
{% endblock %}
