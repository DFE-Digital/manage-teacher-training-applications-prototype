{% extends "_layout.njk" %}

{% set primaryNavId = 'applications' %}
{% set application = data.applications[applicationId] %}
{% set name = [application["personal-details"]["given-name"], application["personal-details"]["family-name"]] | join(" ") %}
{% set title = "Check and confirm rejection" %}

{% block pageNavigation %}
  {{ govukBackLink({
    href: "/application/" + application.id + "/reject"
  }) }}
{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <span class="govuk-caption-xl">{{name}}</span>
      <h1 class="govuk-heading-xl">{{title}}</h1>



      <h2 class="govuk-heading-l">Reasons for rejection</h2>

      {% set candidateActionReasonsHtml %}
        {% set checkboxValue = "Didn’t reply to our interview offer" %}
        {% if checked("candidate-actions-reasons", checkboxValue) %}
          <p>{{checkboxValue}}</p>
        {% endif %}

        {% set checkboxValue = "Didn’t attend interview" %}
        {% if checked("candidate-actions-reasons", checkboxValue) %}
          <p>{{checkboxValue}}</p>
        {% endif %}

        {% set checkboxValue = "Other" %}
        {% if checked("candidate-actions-reasons", "Other") %}
          <p>{{checkboxValue}}: {{data['candidate-actions-reasons-other']}}</p>
        {% endif %}
      {% endset %}

      {% set missingQualificationsReasonsHtml %}
        {% set checkboxValue = "No Maths GCSE grade 4 (C) or above, or valid equivalent" %}
        {% if checked("missing-qualifications-reasons", checkboxValue) %}
          <p>{{checkboxValue}}</p>
        {% endif %}

        {% set checkboxValue = "No English GCSE grade 4 (C) or above, or valid equivalent" %}
        {% if checked("missing-qualifications-reasons", checkboxValue) %}
          <p>{{checkboxValue}}</p>
        {% endif %}

        {% set checkboxValue = "No Science GCSE grade 4 (C) or above, or valid equivalent (for primary applicants)" %}
        {% if checked("missing-qualifications-reasons", checkboxValue) %}
          <p>{{checkboxValue}}</p>
        {% endif %}

        {% set checkboxValue = "No degree" %}
        {% if checked("missing-qualifications-reasons", checkboxValue) %}
          <p>{{checkboxValue}}</p>
        {% endif %}

        {% set checkboxValue = "Degree doesn’t meet course requirements" %}
        {% if checked("missing-qualifications-reasons", checkboxValue) %}
          <p>{{checkboxValue}}</p>
        {% endif %}

        {% set checkboxValue = "Other" %}
        {% if checked("missing-qualifications-reasons", "Other") %}
          <p>{{checkboxValue}}: {{data['candidate-actions-reasons-other']}}</p>
        {% endif %}
      {% endset %}



      {{ govukSummaryList({
        rows: [{
          key: {
            text: "Was it due to candidate actions?"
          },
          value: {
            html: data['candidate-actions']
          },
          actions: {
            items: [
              {
                href: "/application/" + application.id + "/reject/",
                text: "Change",
                visuallyHiddenText: ""
              }
            ]
          }
        }, {
          key: {
            text: "Candidate action reasons"
          },
          value: {
            html: candidateActionReasonsHtml
          },
          actions: {
            items: [
              {
                href: "/application/" + application.id + "/reject/",
                text: "Change",
                visuallyHiddenText: ""
              }
            ]
          }
        } if data['candidate-actions'] == "Yes",
        {
          key: {
            text: "Was it because this course is full?"
          },
          value: {
            html: data['course-full']
          },
          actions: {
            items: [
              {
                href: "/application/" + application.id + "/reject/",
                text: "Change",
                visuallyHiddenText: ""
              }
            ]
          }
        }, {
          key: {
            text: "Was it due to missing qualifications?"
          },
          value: {
            html: data['missing-qualifications']
          },
          actions: {
            items: [
              {
                href: "/application/" + application.id + "/reject/",
                text: "Change",
                visuallyHiddenText: ""
              }
            ]
          }
        }, {
          key: {
            text: "Missing qualification reasons"
          },
          value: {
            html: missingQualificationsReasonsHtml
          },
          actions: {
            items: [
              {
                href: "/application/" + application.id + "/reject/",
                text: "Change",
                visuallyHiddenText: ""
              }
            ]
          }
        } if data['missing-qualifications'] == "Yes"
        ]
      }) }}


      <form method="post">
        {{ govukButton({
          text: "Reject application"
        }) }}
      </form>
      <p class="govuk-body"><a href="/application/{{ application.id }}">Cancel</a></p>
    </div>
  </div>
{% endblock %}
