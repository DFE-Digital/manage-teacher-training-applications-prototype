{% extends "_layout.njk" %}

{% set primaryNavId = 'interviews' %}
{% set title = "Interviews" %}

{% block content %}

  <div class="govuk-grid-ro">
    <div class="govuk-grid-column-two-third">
      <h1 class="govuk-heading-l">{{title}}</h1>

      {{ appSubNavigation({
        label: 'Sub navigation',
        items: [{
          text: 'Upcoming interviews',
          href: '/interviews'
        }, {
          text: 'Previous interviews',
          href: '/application/past',
          active: true
        }]
      }) }}

      {% for day, interviews in interviews %}

        <h2 class="govuk-heading-s govuk-!-margin-top-7 govuk-!-margin-bottom-3">
          {{ day | govukDate }}
        </h2>

        {% for interview in interviews %}
          <div class="app-interview-card">
            <div class="app-interview-card__time">
              <p class="govuk-!-margin-bottom-1">
                <a href="/application/{{interview.app.id}}/interviews" class="govuk-link--no-visited-state">
                <time datetime="{{ interview.interview.date }}">
                  {{interview.interview.date | time }}
                </time>
                <span class="govuk-visually-hidden"> on {{ day | govukDate }} with {{interview.app.personalDetails.givenName}} {{interview.app.personalDetails.familyName}}</span>
                </a>
              </p>
            </div>
            <div class="app-interview-card__course">
              <p class="govuk-!-margin-bottom-1">{{ interview.app.course }} </p>
              <p class="govuk-caption-m govuk-!-margin-bottom-1">{{ interview.app.provider }}</p>
            </div>
            <div class="app-interview-card__candidate">
              <p class="govuk-!-margin-bottom-1">{{interview.app.personalDetails.givenName}} {{interview.app.personalDetails.familyName}}</p>
              {% if interview.app.interviewNeeds.length %}
                <p class="govuk-!-margin-bottom-0 govuk-!-font-weight-bold govuk-!-font-size-1">
                  {{ appIcon({
                    classes: "govuk-!-margin-right-0",
                    icon: "info",
                    hidden: true
                  }) }}
                  Has interview preferences
                </p>
              {% endif %}
            </div>
          </div>
        {% endfor %}
      {% endfor %}
    </div>
  </div>

{% endblock %}
