{% extends "_layout.njk" %}

{% set primaryNavId = 'interviews' %}
{% set title = "Interviews" %}

{% block content %}

  <div class="govuk-grid-ro">
    <div class="govuk-grid-column-two-third">
      <h1 class="govuk-heading-l">{{title}}</h1>

  <table class="govuk-table">

    <thead class="govuk-table__head">
      <tr class="govuk-table__row govuk-visually-hidden">
        <th scope="col" class="govuk-table__header">Date and time</th>
        <th scope="col" class="govuk-table__header">Candidate name</th>
        <th scope="col" class="govuk-table__header">Course</th>
        {# <th scope="col" class="govuk-table__header">Has interview preferences</th> #}
      </tr>
    </thead>
    <tbody class="govuk-table__body">
      {% set now = futureInterviews[0].interview.date %}
      {% set lastDate = now | govukDate %}
      {% for interview in futureInterviews %}
        {% if loop.first %}
          <tr class="govuk-table__row">
            <th colspan="4" class="govuk-table__header govuk-!-font-weight-regula">Today</th>
          </tr>
        {% endif %}
        {# The date of this interview is the same as the last date so do not create a TR #}
        {% if interview.interview.date | govukDate != lastDate %}
          <tr class="govuk-table__row">
            <th colspan="4" class="govuk-table__header govuk-!-font-weight-regula govuk-!-padding-top-6">
              {% if interview.interview.date | daysFromDate(now) == 1 %}
                Tomorrow
              {% else %}
                {{interview.interview.date | govukDate  }}
              {% endif %}
            </th>
          </tr>
        {% endif %}
        {% set lastDate = interview.interview.date | govukDate %}

        <tr class="govuk-table__row app-table__row--inden">
          <td class="govuk-table__cell">
            <a href="/application/{{interview.app.id}}/interviews" class="govuk-link--no-visited-state">{{interview.interview.date | time }}</a>
          </td>
          <td class="govuk-table__cell">
            <p class="govuk-!-margin-bottom-1">{{ interview.app.course }} </p>
            <p class="govuk-caption-m govuk-!-margin-bottom-0">{{ interview.app.provider }}</p>
          </td>
          <td class="govuk-table__cell">
            <p class="govuk-!-margin-bottom-1">{{interview.app.personalDetails.givenName}} {{interview.app.personalDetails.familyName}}</p>
            {% if interview.app.interviewNeeds.length %}
              {# {{ govukTag({
                text: "Interview preferences",
                classes: "govuk-tag--yellow"
              }) }} #}
              <p class="govuk-!-margin-bottom-0 govuk-!-font-weight-bold">{{ appIcon({
                    classes: "govuk-!-margin-right-1",
                    icon: "tick",
                    hidden: true
                  }) }} Has interview preferences</p>
            {% endif %}
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  {{ appPagination({
      results: {
        from: 1,
        to: 15,
        count: 30
      },
        next: {
        text: 'Next',
        href: ''
      },
        items: [{
        text: '1',
        href: '/page=1',
        selected: true
      }, {
        text: '2',
        href: '/page=2'
      }]
    }) }}
    </div>

  </div>





{% endblock %}
